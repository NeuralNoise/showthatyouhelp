function updateContent(a,b){a.fadeOut("slow",function(){$(this).html(b).fadeIn("slow")})}
function fetchUrl(){""!=$("#url").val()&&($("#submit").attr("disabled",!0),updateContent($(".updates-list-share-answer"),'<div class="loading"></div>'),$.post(base_url+"share/url",$("#share").serialize(),function(a){1==a.result?($(".updates-list-share-answer").html(a.html),url_data=jQuery.parseJSON(a.url_json),$("#share input[name=remote]").val(1),$("#share input[name=url]").val(url_data.url),$("#share input[name=title]").val(url_data.title),$("#share input[name=description]").val(url_data.description),
$("#share input[name=image]").val($(".share-images-list img.selected").attr("src")),$("#share input[name=icon]").val(url_data.icon),$("#share input[name=domain]").val(url_data.domain),$("#share input[name=site_name]").val(url_data.site_name),$("#submit").removeAttr("disabled")):($("#submit").attr("disabled",!0),updateContent($(".updates-list-share-answer"),a.html))},"json").error(function(){$("#submit").attr("disabled",!0);updateContent($(".updates-list-share-answer"),'<p class="error-msg">An internal error occurred. Please try again. If the error persists contact us at support@showthatyouhelp.com</p>')}))}
function switchImage(a){var b=$(".share-images-counter").html().split("/"),c=parseInt($.trim(b[0])),b=parseInt($.trim(b[1])),a="left"==a?1==c?b:c-1:c==b?1:c+1;$(".single-image-"+(c-1)).fadeOut("fast").removeClass("selected");$(".single-image-"+(a-1)).fadeIn("fast").addClass("selected");$("#image").val($(".share-images-list img.selected").attr("src"));$(".share-images-counter").html(a+" / "+b)}
$(document).ready(function(){fetchUrl();$("#url").blur(function(){fetchUrl()});$(".share-images-left").live("click",function(){switchImage("left")});$(".share-images-right").live("click",function(){switchImage("right")});$("#share").submit(function(){$.post(base_url+"share",$(this).serialize(),function(a){1==a.result?window.close():($("#submit").attr("disabled",!0),$(".updates-list-share-answer").html(a.html))},"json").error(function(){$("#submit").attr("disabled",!0);updateContent($(".updates-list-share-answer"),
'<p class="error-msg">An internal error occurred. Please try again. If the error persists contact us at support@showthatyouhelp.com</p>')});return!1})});